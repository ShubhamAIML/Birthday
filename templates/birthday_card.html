<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy 31st Birthday Kanchan Ji üíñ</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;600;700&family=Poppins:wght@300;400;500;600&family=Great+Vibes&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%);
            background-size: 300% 300%;
            animation: gradientShift 15s ease infinite;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
            padding-bottom: 120px;
        }

        /* Enhanced Floating hearts */
        .floating-heart {
            position: fixed;
            color: rgba(118, 75, 162, 0.4);
            font-size: 1.5rem;
            animation: gentleFloat 8s ease-in-out infinite;
            pointer-events: none;
        }

        .heart-1 { top: 15%; left: 10%; animation-delay: 0s; }
        .heart-2 { top: 25%; right: 15%; animation-delay: 3s; }
        .heart-3 { bottom: 20%; left: 20%; animation-delay: 6s; }
        .heart-4 { top: 60%; right: 25%; animation-delay: 9s; }

        /* Main card */
        .birthday-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 35px;
            padding: clamp(40px, 6vw, 80px);
            max-width: 850px;
            width: 100%;
            text-align: center;
            box-shadow: 
                0 25px 70px rgba(102, 126, 234, 0.2),
                0 0 0 1px rgba(255, 255, 255, 0.8),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
            position: relative;
            animation: cardAppear 1.8s ease-out;
        }

        /* Age badge */
        .age-badge {
            position: absolute;
            top: -20px;
            right: 40px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-size: clamp(1.8rem, 3vw, 2.5rem);
            font-weight: 700;
            width: clamp(60px, 8vw, 80px);
            height: clamp(60px, 8vw, 80px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
            animation: gentleBounce 3s ease-in-out infinite;
        }

        /* Typography */
        .main-title {
            font-family: 'Great Vibes', cursive;
            font-size: clamp(3rem, 6vw, 5rem);
            background: linear-gradient(135deg, #667eea, #f093fb, #f5576c);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            animation: titleGlow 4s ease-in-out infinite alternate;
        }

        .name {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(2.5rem, 5vw, 4rem);
            color: #764ba2;
            margin-bottom: 25px;
            font-weight: 700;
            animation: nameFloat 5s ease-in-out infinite;
        }

        .date-container {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.15), rgba(240, 147, 251, 0.15));
            padding: 18px 35px;
            border-radius: 30px;
            border: 2px solid rgba(102, 126, 234, 0.3);
            display: inline-block;
            margin-bottom: 40px;
            backdrop-filter: blur(10px);
        }

        .date-text {
            font-size: clamp(1.1rem, 2vw, 1.4rem);
            color: #764ba2;
            font-weight: 600;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        /* ENHANCED MEGA CELEBRATION BUTTON */
        .mega-celebration-btn {
            background: linear-gradient(135deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
            background-size: 400% 400%;
            animation: celebrationGradient 3s ease infinite;
            border: none;
            color: white;
            padding: 20px 40px;
            border-radius: 35px;
            font-size: clamp(1.2rem, 2.5vw, 1.5rem);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.4s ease;
            box-shadow: 
                0 8px 25px rgba(255, 107, 107, 0.4),
                0 0 0 2px rgba(255, 255, 255, 0.3);
            text-transform: uppercase;
            letter-spacing: 2px;
            position: relative;
            overflow: hidden;
        }

        .mega-celebration-btn::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transform: rotate(45deg);
            animation: shimmer 2s infinite;
        }

        .mega-celebration-btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 40px rgba(255, 107, 107, 0.6);
        }

        /* STICKY MUSIC PLAYER */
        .sticky-music-player {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
            background-size: 400% 400%;
            animation: musicGradientShift 8s ease infinite;
            padding: 15px 20px;
            border-radius: 50px;
            box-shadow: 
                0 15px 35px rgba(255, 107, 107, 0.4),
                0 0 0 2px rgba(255, 255, 255, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
            display: flex;
            align-items: center;
            gap: 15px;
            color: white;
            font-family: 'Poppins', sans-serif;
            z-index: 10000;
            width: 380px;
            max-width: calc(100vw - 40px);
            backdrop-filter: blur(25px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            transform: translateX(300px);
            animation: slideInPlayer 1.5s ease-out 2s forwards, musicGradientShift 8s ease infinite 2s;
        }

        .music-cake-icon {
            font-size: 2.2rem;
            animation: cakeRotate 4s ease-in-out infinite;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
            user-select: none;
        }

        .player-controls-section {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
        }

        .play-pause-btn-sticky {
            background: rgba(255, 255, 255, 0.25);
            border: none;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.6rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
        }

        .play-pause-btn-sticky:hover {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .volume-section {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .volume-slider-sticky {
            -webkit-appearance: none;
            width: 90px;
            height: 6px;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.3);
            cursor: pointer;
        }

        .volume-slider-sticky::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: linear-gradient(135deg, #fff, #f0f0f0);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .progress-section {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 0 10px;
        }

        .progress-container-sticky {
            flex: 1;
            height: 8px;
            background: rgba(255, 255, 255, 0.25);
            border-radius: 6px;
            cursor: pointer;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        .progress-bar-sticky {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #fff, #ffd700, #ff69b4);
            border-radius: 6px;
            transition: width 0.1s ease;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .time-display-sticky {
            font-size: 0.8rem;
            min-width: 45px;
            text-align: right;
            font-weight: 500;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }

        /* Poem section */
        .poem-section {
            background: linear-gradient(145deg, 
                rgba(255, 255, 255, 0.8), 
                rgba(102, 126, 234, 0.08));
            padding: 45px;
            border-radius: 25px;
            margin: 40px 0;
            border-left: 6px solid #667eea;
            position: relative;
            animation: contentFadeIn 2.5s ease-out;
            backdrop-filter: blur(15px);
        }

        .poem-title {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(1.8rem, 3vw, 2.5rem);
            color: #667eea;
            margin-bottom: 30px;
            font-weight: 700;
        }

        .poem-text {
            font-family: 'Crimson Text', serif;
            font-size: clamp(1.1rem, 2.2vw, 1.4rem);
            line-height: 2;
            color: #444;
            text-align: left;
        }

        .poem-line {
            margin-bottom: 12px;
            opacity: 0;
            animation: lineAppear 1s ease-out forwards;
            padding-left: 20px;
            position: relative;
            font-style: italic;
        }

        .poem-line::before {
            content: "‚ú®";
            position: absolute;
            left: 0;
            color: #f093fb;
            font-size: 1rem;
        }

        .poem-line:nth-child(1) { animation-delay: 0.5s; }
        .poem-line:nth-child(2) { animation-delay: 0.8s; }
        .poem-line:nth-child(3) { animation-delay: 1.1s; }
        .poem-line:nth-child(4) { animation-delay: 1.4s; }
        .poem-line:nth-child(5) { animation-delay: 1.7s; }
        .poem-line:nth-child(6) { animation-delay: 2s; }
        .poem-line:nth-child(7) { animation-delay: 2.3s; }
        .poem-line:nth-child(8) { animation-delay: 2.6s; }

        /* Wish section */
        .wish-section {
            background: linear-gradient(135deg, 
                rgba(240, 147, 251, 0.12), 
                rgba(245, 87, 108, 0.12));
            padding: 35px;
            border-radius: 25px;
            margin: 35px 0;
            border: 2px dashed rgba(102, 126, 234, 0.3);
        }

        .wish-title {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(1.5rem, 2.8vw, 2rem);
            color: #667eea;
            margin-bottom: 25px;
        }

        .wish-text {
            font-size: clamp(1rem, 2vw, 1.2rem);
            line-height: 1.8;
            color: #555;
            font-style: italic;
        }

        /* Actions */
        .actions {
            margin-top: 45px;
            display: flex;
            gap: 25px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .action-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: none;
            color: white;
            padding: 15px 30px;
            border-radius: 30px;
            font-size: clamp(0.95rem, 2vw, 1.1rem);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.4s ease;
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.3);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        /* Footer */
        .footer {
            margin-top: 45px;
            padding-top: 30px;
            border-top: 2px solid rgba(102, 126, 234, 0.2);
        }

        .footer-text {
            font-size: clamp(0.9rem, 1.8vw, 1.1rem);
            color: #666;
            font-style: italic;
            line-height: 1.6;
        }

        .footer-highlight {
            color: #667eea;
            font-weight: 600;
        }

        /* AMAZING NEW ANIMATION EFFECTS */

        /* Confetti animation */
        @keyframes confettiFall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* Firework burst animation */
        @keyframes fireworkBurst {
            0% {
                transform: scale(0) rotate(0deg);
                opacity: 1;
            }
            50% {
                transform: scale(1.5) rotate(180deg);
                opacity: 0.8;
            }
            100% {
                transform: scale(3) rotate(360deg);
                opacity: 0;
            }
        }

        /* Sparkle animation */
        @keyframes sparkleShine {
            0%, 100% {
                transform: scale(0) rotate(0deg);
                opacity: 0;
            }
            50% {
                transform: scale(1.5) rotate(180deg);
                opacity: 1;
            }
        }

        /* Balloon float animation */
        @keyframes balloonFloat {
            0% {
                transform: translateY(100vh) translateX(0) rotate(0deg);
                opacity: 1;
            }
            25% {
                transform: translateY(75vh) translateX(-20px) rotate(-5deg);
                opacity: 1;
            }
            50% {
                transform: translateY(50vh) translateX(10px) rotate(5deg);
                opacity: 0.9;
            }
            75% {
                transform: translateY(25vh) translateX(-10px) rotate(-3deg);
                opacity: 0.7;
            }
            100% {
                transform: translateY(-20vh) translateX(5px) rotate(0deg);
                opacity: 0;
            }
        }

        /* Heart rain animation */
        @keyframes heartRain {
            0% {
                transform: translateY(-50px) scale(0);
                opacity: 0;
            }
            10% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
            90% {
                transform: translateY(100vh) scale(0.8);
                opacity: 0.8;
            }
            100% {
                transform: translateY(110vh) scale(0);
                opacity: 0;
            }
        }

        /* Screen shake animation */
        @keyframes screenShake {
            0%, 100% { transform: translateX(0); }
            10% { transform: translateX(-10px); }
            20% { transform: translateX(10px); }
            30% { transform: translateX(-10px); }
            40% { transform: translateX(10px); }
            50% { transform: translateX(-10px); }
            60% { transform: translateX(10px); }
            70% { transform: translateX(-10px); }
            80% { transform: translateX(10px); }
            90% { transform: translateX(-10px); }
        }

        /* Screen glow animation */
        @keyframes screenGlow {
            0% {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%);
                filter: brightness(1);
            }
            50% {
                background: linear-gradient(135deg, #ff6b6b 0%, #ffd700 25%, #ff69b4 50%, #00ced1 75%, #98fb98 100%);
                filter: brightness(1.5) saturate(1.3);
            }
            100% {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%);
                filter: brightness(1);
            }
        }

        /* Enhanced existing animations */
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            25% { background-position: 100% 25%; }
            50% { background-position: 50% 100%; }
            75% { background-position: 25% 0%; }
        }

        @keyframes musicGradientShift {
            0% { background-position: 0% 50%; }
            25% { background-position: 100% 25%; }
            50% { background-position: 50% 100%; }
            75% { background-position: 25% 0%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes celebrationGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) rotate(45deg); }
            100% { transform: translateX(100%) rotate(45deg); }
        }

        @keyframes slideInPlayer {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes cakeRotate {
            0%, 100% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(-5deg) scale(1.1); }
            50% { transform: rotate(0deg) scale(1.05); }
            75% { transform: rotate(5deg) scale(1.1); }
        }

        @keyframes cardAppear {
            from {
                opacity: 0;
                transform: translateY(40px) scale(0.95);
                filter: blur(5px);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
                filter: blur(0);
            }
        }

        @keyframes gentleFloat {
            0%, 100% { transform: translateY(0px); opacity: 0.4; }
            50% { transform: translateY(-20px); opacity: 0.7; }
        }

        @keyframes gentleBounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.08); }
        }

        @keyframes titleGlow {
            0% { filter: brightness(1) drop-shadow(0 0 10px rgba(102, 126, 234, 0.3)); }
            100% { filter: brightness(1.1) drop-shadow(0 0 15px rgba(240, 147, 251, 0.4)); }
        }

        @keyframes nameFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
        }

        @keyframes contentFadeIn {
            from { opacity: 0; transform: translateY(25px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes lineAppear {
            from { opacity: 0; transform: translateX(-30px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes messageShow {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            20% { opacity: 1; transform: translate(-50%, -50%) scale(1.05); }
            80% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(0.9); }
        }

        /* Perfect responsive design */
        @media (max-width: 768px) {
            body { padding: 15px; padding-bottom: 100px; }
            .birthday-card { padding: 35px 25px; border-radius: 25px; }
            .poem-section { padding: 30px 20px; }
            .actions { flex-direction: column; align-items: center; }
            .action-btn, .mega-celebration-btn { width: 100%; max-width: 280px; }
            .poem-text { text-align: center; }
            .sticky-music-player { 
                width: calc(100vw - 20px); 
                right: 10px; 
                bottom: 10px;
                padding: 12px 15px;
                border-radius: 35px;
            }
        }

        @media (max-width: 480px) {
            .birthday-card { padding: 30px 20px; }
            .age-badge { top: -15px; right: 20px; }
            .volume-slider-sticky { width: 70px; }
            .music-cake-icon { font-size: 1.8rem; }
            .play-pause-btn-sticky { width: 45px; height: 45px; font-size: 1.4rem; }
            .sticky-music-player { padding: 10px 12px; }
        }
    </style>
</head>
<body>
    <!-- Enhanced floating hearts -->
    <div class="floating-heart heart-1">üíú</div>
    <div class="floating-heart heart-2">üíô</div>
    <div class="floating-heart heart-3">üíñ</div>
    <div class="floating-heart heart-4">üí´</div>

    <!-- Hidden audio element -->
    <audio id="birthdaySong" preload="metadata">
        <source src="{{ url_for('static', filename='audio/birthday_song.mp3') }}" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <!-- AMAZING STICKY MUSIC PLAYER -->
    <div class="sticky-music-player">
        <div class="music-cake-icon">üéÇ</div>
        
        <div class="player-controls-section">
            <button class="play-pause-btn-sticky" id="playPauseBtnSticky" onclick="togglePlayPause()">
                ‚ñ∂Ô∏è
            </button>
            
            <div class="volume-section">
                <span style="font-size: 1.1rem;">üîä</span>
                <input type="range" class="volume-slider-sticky" id="volumeSliderSticky" 
                       min="0" max="100" value="70" onchange="adjustVolume()">
            </div>
        </div>

        <div class="progress-section">
            <div class="progress-container-sticky" onclick="setProgressSticky(event)">
                <div class="progress-bar-sticky" id="progressBarSticky"></div>
            </div>
            <div class="time-display-sticky" id="timeDisplaySticky">0:00</div>
        </div>
    </div>

    <!-- Main birthday card -->
    <div class="birthday-card">
        <!-- Age badge -->
        <div class="age-badge">31</div>

        <!-- Header -->
        <div class="header">
            <h1 class="main-title">Happy Birthday</h1>
            <h2 class="name">Kanchan Ji</h2>
            <div class="date-container">
                <div class="date-text">‚ú® August 8th, 2025 ‚ú®</div>
            </div>
        </div>

        <!-- Poem Section -->
        <div class="poem-section">
            <h3 class="poem-title">üíú A Golden Symphony for Kanchan Ji üíú</h3>
            <div class="poem-text">
                <div class="poem-line">On this blessed August eighth, when stars align so bright,</div>
                <div class="poem-line">We celebrate dear Kanchan Ji, our beacon of pure light.</div>
                <div class="poem-line">Your name whispers golden tales of beauty, grace, and more,</div>
                <div class="poem-line">Like precious treasure from the earth, you're what we all adore.</div>
                <div class="poem-line">Thirty-one candles dance today, each flame a memory sweet,</div>
                <div class="poem-line">Of laughter shared, of love you've spread, making life complete.</div>
                <div class="poem-line">May this new year paint your world in hues of joy and bliss,</div>
                <div class="poem-line">For someone as wonderful as you deserves nothing less than this! üåü</div>
            </div>
        </div>

        <!-- Wish Section -->
        <div class="wish-section">
            <h3 class="wish-title">üåü Heartfelt Birthday Wish üåü</h3>
            <p class="wish-text" id="wishText">
                As you celebrate another beautiful year of life, may your heart be filled with boundless joy, 
                your dreams take flight on wings of hope, and every moment ahead shimmer with the magic you bring to this world. 
                You are a rare gem, Kanchan Ji, and today we celebrate the incredible gift of your presence in our lives! 
                Here's to a year overflowing with love, laughter, and limitless possibilities! üíú‚ú®
            </p>
        </div>

        <!-- Enhanced Actions with MEGA CELEBRATION -->
        <div class="actions">
            <button class="action-btn" onclick="newWish()">
                ‚ú® New Blessing
            </button>
            <button class="mega-celebration-btn" onclick="megaCelebration()">
                üéä MEGA CELEBRATION! üéä
            </button>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p class="footer-text">
                Crafted with üíú infinite love and ‚ú® magical blessings ‚ú® for our extraordinary 
                <span class="footer-highlight">Kanchan Ji</span><br>
                <small>May this <strong>31st year</strong> be filled with wonder, wisdom, and endless wonder! üåü</small>
            </p>
        </div>
    </div>

    <script>
        // Enhanced music player functionality
        const audio = document.getElementById('birthdaySong');
        let isPlaying = false;
        let celebrationLevel = 0;

        // Toggle play/pause
        function togglePlayPause() {
            const playPauseBtn = document.getElementById('playPauseBtnSticky');
            
            if (isPlaying) {
                audio.pause();
                playPauseBtn.textContent = '‚ñ∂Ô∏è';
                isPlaying = false;
                showMessage('‚è∏Ô∏è Music paused');
            } else {
                audio.play().then(() => {
                    playPauseBtn.textContent = '‚è∏Ô∏è';
                    isPlaying = true;
                    showMessage('üéµ Playing your special birthday song!');
                }).catch(error => {
                    console.log('Playback failed:', error);
                    showMessage('‚ùå Could not play the song. Please check if the MP3 file is in the audio folder.');
                });
            }
        }

        // Adjust volume
        function adjustVolume() {
            const volume = document.getElementById('volumeSliderSticky').value / 100;
            audio.volume = volume;
        }

        // Set progress
        function setProgressSticky(event) {
            const progressContainer = event.currentTarget;
            const clickPosition = event.offsetX;
            const containerWidth = progressContainer.offsetWidth;
            const duration = audio.duration;
            
            if (duration) {
                const newTime = (clickPosition / containerWidth) * duration;
                audio.currentTime = newTime;
            }
        }

        // Update progress bar
        function updateProgressSticky() {
            const progressBar = document.getElementById('progressBarSticky');
            const timeDisplay = document.getElementById('timeDisplaySticky');
            
            if (audio.duration) {
                const progressPercent = (audio.currentTime / audio.duration) * 100;
                progressBar.style.width = progressPercent + '%';
                
                timeDisplay.textContent = formatTime(audio.currentTime) + '/' + formatTime(audio.duration);
            }
        }

        // Format time
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${minutes}:${secs < 10 ? '0' : ''}${secs}`;
        }

        // üéâ MEGA CELEBRATION FUNCTION WITH AMAZING EFFECTS! üéâ
        function megaCelebration() {
            celebrationLevel++;
            
            // Screen shake and glow
            document.body.style.animation = 'screenShake 1s ease-in-out, screenGlow 3s ease-in-out';
            setTimeout(() => {
                document.body.style.animation = 'gradientShift 15s ease infinite';
            }, 3000);

            // Multiple celebration effects based on level
            switch(celebrationLevel) {
                case 1:
                    showMessage('üéâ LEVEL 1 MEGA CELEBRATION! üéâ');
                    createConfettiBurst(80);
                    createSparkles(30);
                    break;
                case 2:
                    showMessage('üöÄ LEVEL 2 SUPER CELEBRATION! üöÄ');
                    createConfettiBurst(120);
                    createFireworks(6);
                    createHeartRain(25);
                    break;
                case 3:
                    showMessage('üí• LEVEL 3 ULTIMATE CELEBRATION! üí•');
                    createConfettiBurst(150);
                    createFireworks(10);
                    createSparkles(50);
                    createBalloonFloat(15);
                    createHeartRain(40);
                    break;
                default:
                    showMessage('üåüüí´‚ú® LEGENDARY CELEBRATION! MAXIMUM PARTY MODE! ‚ú®üí´üåü');
                    createConfettiBurst(200);
                    createFireworks(15);
                    createSparkles(70);
                    createBalloonFloat(25);
                    createHeartRain(60);
                    createGoldenSparkles(30);
                    celebrationLevel = 0; // Reset for next cycle
            }
        }

        // üéä CREATE CONFETTI BURST
        function createConfettiBurst(count) {
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#ffd93d', '#ff69b4', '#9d4edd', '#06ffa5'];
            const shapes = ['‚óè', '‚ñ†', '‚ñ≤', '‚ô¶', '‚òÖ', 'üíñ', 'üéâ', '‚ú®'];
            
            for (let i = 0; i < count; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.textContent = shapes[Math.floor(Math.random() * shapes.length)];
                    confetti.style.cssText = `
                        position: fixed;
                        left: ${Math.random() * 100}vw;
                        top: -20px;
                        color: ${colors[Math.floor(Math.random() * colors.length)]};
                        font-size: ${Math.random() * 20 + 15}px;
                        pointer-events: none;
                        z-index: 9999;
                        animation: confettiFall ${Math.random() * 4 + 3}s linear forwards;
                    `;
                    
                    document.body.appendChild(confetti);
                    setTimeout(() => confetti.remove(), 7000);
                }, i * 50);
            }
        }

        // üéÜ CREATE FIREWORKS
        function createFireworks(count) {
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#ffd93d', '#ff69b4', '#9d4edd'];
            
            for (let i = 0; i < count; i++) {
                setTimeout(() => {
                    const firework = document.createElement('div');
                    firework.textContent = '‚ú®';
                    firework.style.cssText = `
                        position: fixed;
                        left: ${Math.random() * 80 + 10}vw;
                        top: ${Math.random() * 40 + 10}vh;
                        color: ${colors[Math.floor(Math.random() * colors.length)]};
                        font-size: 3rem;
                        pointer-events: none;
                        z-index: 9999;
                        animation: fireworkBurst 2s ease-out forwards;
                        filter: drop-shadow(0 0 10px currentColor);
                    `;
                    
                    document.body.appendChild(firework);
                    setTimeout(() => firework.remove(), 2000);
                }, i * 300);
            }
        }

        // ‚ú® CREATE SPARKLES
        function createSparkles(count) {
            for (let i = 0; i < count; i++) {
                setTimeout(() => {
                    const sparkle = document.createElement('div');
                    sparkle.textContent = '‚ú®';
                    sparkle.style.cssText = `
                        position: fixed;
                        left: ${Math.random() * 100}vw;
                        top: ${Math.random() * 100}vh;
                        font-size: ${Math.random() * 15 + 10}px;
                        pointer-events: none;
                        z-index: 9999;
                        animation: sparkleShine 1.5s ease-in-out forwards;
                        color: gold;
                        filter: drop-shadow(0 0 5px gold);
                    `;
                    
                    document.body.appendChild(sparkle);
                    setTimeout(() => sparkle.remove(), 1500);
                }, i * 100);
            }
        }

        // üéà CREATE BALLOON FLOAT
        function createBalloonFloat(count) {
            const balloons = ['üéà', 'üéà', 'üéà', 'üéà', 'üéà'];
            const colors = ['red', 'blue', 'yellow', 'green', 'pink'];
            
            for (let i = 0; i < count; i++) {
                setTimeout(() => {
                    const balloon = document.createElement('div');
                    balloon.textContent = balloons[Math.floor(Math.random() * balloons.length)];
                    balloon.style.cssText = `
                        position: fixed;
                        left: ${Math.random() * 100}vw;
                        bottom: -50px;
                        font-size: ${Math.random() * 20 + 25}px;
                        pointer-events: none;
                        z-index: 9999;
                        animation: balloonFloat ${Math.random() * 3 + 5}s ease-out forwards;
                        filter: hue-rotate(${Math.random() * 360}deg);
                    `;
                    
                    document.body.appendChild(balloon);
                    setTimeout(() => balloon.remove(), 8000);
                }, i * 200);
            }
        }

        // üíñ CREATE HEART RAIN
        function createHeartRain(count) {
            const hearts = ['üíñ', 'üíï', 'üíó', 'üíì', 'üíù', '‚ù§Ô∏è', 'üß°', 'üíõ', 'üíö', 'üíô', 'üíú'];
            
            for (let i = 0; i < count; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                    heart.style.cssText = `
                        position: fixed;
                        left: ${Math.random() * 100}vw;
                        top: -30px;
                        font-size: ${Math.random() * 15 + 20}px;
                        pointer-events: none;
                        z-index: 9999;
                        animation: heartRain ${Math.random() * 2 + 4}s ease-in-out forwards;
                    `;
                    
                    document.body.appendChild(heart);
                    setTimeout(() => heart.remove(), 6000);
                }, i * 150);
            }
        }

        // üåü CREATE GOLDEN SPARKLES
        function createGoldenSparkles(count) {
            for (let i = 0; i < count; i++) {
                setTimeout(() => {
                    const sparkle = document.createElement('div');
                    sparkle.textContent = 'üåü';
                    sparkle.style.cssText = `
                        position: fixed;
                        left: ${Math.random() * 100}vw;
                        top: ${Math.random() * 100}vh;
                        font-size: ${Math.random() * 20 + 15}px;
                        pointer-events: none;
                        z-index: 9999;
                        animation: sparkleShine 2s ease-in-out forwards;
                        filter: drop-shadow(0 0 8px gold);
                    `;
                    
                    document.body.appendChild(sparkle);
                    setTimeout(() => sparkle.remove(), 2000);
                }, i * 80);
            }
        }

        // Enhanced wish function
        function newWish() {
            const superWishes = [
                "üåü May your 31st year be a masterpiece painted with golden sunrises, silver moonlight, and rainbow dreams that all come true, dear Kanchan Ji! üíú",
                "‚ú® Like a butterfly emerging from its cocoon, may this year transform every hope into reality and every dream into a beautiful journey of joy! ü¶ã",
                "üå∏ May your path be adorned with flowers of happiness, your heart filled with melodies of laughter, and your soul blessed with peace! üéµ",
                "üí´ Here's to 365 days of magical moments, where every sunrise brings new possibilities and every sunset whispers gratitude! üåÖ",
                "üå∫ May the universe conspire to shower you with blessings as abundant as stars in the sky and as precious as your golden heart! ‚≠ê",
                "ü¶Ñ Wishing you a year where miracles become everyday occurrences and where your light continues to illuminate the world! üíñ",
                "üéÇ May this special day mark the beginning of a year filled with golden opportunities, platinum dreams, and diamond moments! üíé",
                "üåà Here's to a year that sparkles with adventure, glows with love, and shines with all the success you deserve! ‚ú®"
            ];

            const wishText = document.getElementById('wishText');
            const randomWish = superWishes[Math.floor(Math.random() * superWishes.length)];
            
            wishText.style.opacity = '0.3';
            wishText.style.transform = 'translateY(15px)';
            
            setTimeout(() => {
                wishText.textContent = randomWish;
                wishText.style.opacity = '1';
                wishText.style.transform = 'translateY(0)';
                
                // Add sparkle effect around the wish
                createSparkles(10);
            }, 400);

            showMessage("üíú A magical new blessing has been bestowed upon you! ‚ú®");
        }

        // Enhanced message function
        function showMessage(message) {
            const messageDiv = document.createElement('div');
            messageDiv.textContent = message;
            messageDiv.style.cssText = `
                position: fixed;
                top: 12%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: linear-gradient(135deg, #667eea, #764ba2, #f093fb);
                background-size: 200% 200%;
                animation: gradientShift 3s ease infinite, messageShow 5s ease-out forwards;
                color: white;
                padding: 20px 40px;
                border-radius: 30px;
                font-size: clamp(1rem, 2.2vw, 1.3rem);
                font-weight: 600;
                z-index: 10001;
                box-shadow: 0 15px 40px rgba(102, 126, 234, 0.5);
                text-align: center;
                max-width: 90vw;
                backdrop-filter: blur(20px);
                border: 2px solid rgba(255, 255, 255, 0.3);
            `;
            
            document.body.appendChild(messageDiv);
            setTimeout(() => messageDiv.remove(), 5000);
        }

        // Audio event listeners
        audio.addEventListener('timeupdate', updateProgressSticky);
        
        audio.addEventListener('ended', () => {
            document.getElementById('playPauseBtnSticky').textContent = '‚ñ∂Ô∏è';
            isPlaying = false;
            showMessage('üéµ Song finished! Click to play again');
            
            // Auto celebration when song ends
            setTimeout(() => {
                createSparkles(20);
                showMessage('üéâ Thank you for listening to your special song! üéâ');
            }, 1000);
        });

        audio.addEventListener('loadedmetadata', () => {
            updateProgressSticky();
        });

        // Initialize volume
        adjustVolume();

        // Enhanced welcome message with automatic sparkles
        window.addEventListener('load', () => {
            setTimeout(() => {
                showMessage("üåü Welcome to Kanchan Ji's MEGA Musical Birthday Celebration! üíúüéµ");
                createSparkles(15);
            }, 1800);
            
            // Auto sparkles every 15 seconds
            setInterval(() => {
                if (Math.random() < 0.3) {
                    createSparkles(5);
                }
            }, 15000);
        });

        // Add keyboard shortcuts for celebration
        document.addEventListener('keydown', (event) => {
            switch(event.key.toLowerCase()) {
                case ' ': // Spacebar
                    event.preventDefault();
                    megaCelebration();
                    break;
                case 'c': // C key
                    createConfettiBurst(50);
                    break;
                case 'f': // F key
                    createFireworks(3);
                    break;
                case 's': // S key
                    createSparkles(20);
                    break;
            }
        });
    </script>
</body>
</html>
